<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>Core</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html" class="tocviewselflink" data-pltdoc="x">Core</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28part._.Syntactic_forms%29" class="tocviewlink" data-pltdoc="x">Syntactic forms</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28part._.Data_helpers%29" class="tocviewlink" data-pltdoc="x">Data helpers</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Core%29" class="tocsubseclink" data-pltdoc="x">Core</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Syntactic_forms%29" class="tocsubseclink" data-pltdoc="x">Syntactic forms</a></td></tr><tr><td><a href="#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>meta</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._pollen%2Fcore..rkt%29._~40%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">@</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">when/<span class="mywbr"> &nbsp;</span>splice</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Data_helpers%29" class="tocsubseclink" data-pltdoc="x">Data helpers</a></td></tr><tr><td><a href="#%28def._%28%28lib._pollen%2Fcore..rkt%29._get-doc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>doc</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._pollen%2Fcore..rkt%29._get-metas%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">get-<wbr></wbr>metas</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">select</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%2A%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">select*</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-doc%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">select-<wbr></wbr>from-<wbr></wbr>doc</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">select-<wbr></wbr>from-<wbr></wbr>metas</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">6.4.0.4</span></div><h2><a name="(part._.Core)"></a><a name="(mod-path._pollen/core)"></a>Core</h2><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="stt"> </span><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html" class="RktModLink" data-pltdoc="x"><span class="RktSym">pollen/core</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">pollen</span></span></td></tr></table></p><p>These functions are automatically imported into every Pollen source file (meaning, as if they had been included in your <span class="stt">"pollen.rkt"</span>).</p><h3>1<tt>&nbsp;</tt><a name="(part._.Syntactic_forms)"></a>Syntactic forms</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._pollen/core..rkt)._define-meta))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._define-meta%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-meta</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><span class="RktVar">value</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Add <span class="RktVar">value</span> to the metas of the current document, using <span class="RktVar">name</span> as the key.</div></p><p>You can retrieve a meta value &#8212;&#160;even in the same document where you define it &#8212; with <span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span><span class="stt"> </span><span class="RktVar">name</span><span class="stt"> </span><span class="RktSym">metas</span><span class="RktPn">)</span>.</p><p>For an introduction to metas, see <font class="badlink">(part "Inserting_metas")</font>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._pollen/core..rkt)._~40))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._~40%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">@</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Splicing tag: signals that a list should be merged into its containing expression. You can use something other than <span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._~40%29%29" class="RktStxLink" data-pltdoc="x">@</a></span> by overriding <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-splicing-tag</span></span></span>.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">module</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">splicer</span><span class="hspace">&nbsp;</span><span class="RktSym">pollen/markup</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">"one"</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">@</span><span class="hspace">&nbsp;</span><span class="RktVal">"two"</span><span class="hspace">&nbsp;</span><span class="RktVal">"three"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"four"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">splicer</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">doc</span></td></tr><tr><td><p><span class="RktRes">'(root (div "one" "two" "three" "four"))</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._pollen/core..rkt)._when/splice))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">when/splice</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">condition</span><span class="hspace">&nbsp;</span><span class="RktVar">pollen-args</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">If <span class="RktVar">condition</span> is true, put the <span class="RktVar">pollen-args</span> into the document. Within a template file, usually invoked like so:</div></p><p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">&#9674;when/splice[</span><span class="RktVar">condition</span><span class="stt">]{The text to insert.}</span></p></td></tr></table></p><p>The inserted text can contain its own nested Pollen commands.</p><p><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span> can be more convenient than <span class="RktSym"><span class="badlink"><span class="RktValLink">when</span></span></span>, because <span class="RktSym"><span class="badlink"><span class="RktValLink">when</span></span></span> will only use the last argument between the curly braces. <span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28form._%28%28lib._pollen%2Fcore..rkt%29._when%2Fsplice%29%29" class="RktStxLink" data-pltdoc="x">when/splice</a></span>, by contrast, treats everything between the curly braces as a block.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Data_helpers)"></a>Data helpers</h3><p>Functions for retrieving data out of Pollen source files. These are not the only options &#8211;&#160;you can, of course, use any of the usual Racket functions.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._pollen/core..rkt)._get-doc))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._get-doc%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-doc</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">doc-source</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">txexpr?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">string?</span></span></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">doc-source</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pagenode?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pathish?</span></span></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Retrieve the <span class="RktSym">doc</span> export from <span class="RktVar">doc-source</span>, which can be either a path, path string, or pagenode that can be resolved into a source path. If <span class="RktVar">doc-source</span> cannot be resolved, raise an error.</div></p><p>If <span class="RktVar">doc-source</span> is a relative path or pagenode, it is treated as being relative to <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-project-root</span></span></span>. If that&rsquo;s not what you want, you&rsquo;ll need to convert it explicitly to a complete-path (e.g., with <span class="RktSym"><span class="badlink"><span class="RktValLink">path-&gt;complete-path</span></span></span> or <span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;complete-path</span></span></span>).</p><p>If <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-main-export</span></span></span> has been overridden with a project-specific value, then that is retrieved instead.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._pollen/core..rkt)._get-metas))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._get-metas%29%29" class="RktValDef RktValLink" data-pltdoc="x">get-metas</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">meta-source</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">meta-source</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pagenode?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pathish?</span></span></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Retrieve the <span class="RktSym">metas</span> export from <span class="RktVar">meta-source</span>, which can be either a path, path string, or pagenode that can be resolved into a source path. If <span class="RktVar">meta-source</span> cannot be resolved, raise an error.</div></p><p>If <span class="RktVar">meta-source</span> is a relative path or pagenode, it is treated as being relative to <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-project-root</span></span></span>. If that&rsquo;s not what you want, you&rsquo;ll need to convert it explicitly to a complete-path (e.g., with <span class="RktSym"><span class="badlink"><span class="RktValLink">path-&gt;complete-path</span></span></span> or <span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;complete-path</span></span></span>).</p><p>If <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-meta-export</span></span></span> has been overridden with a project-specific value, then that is retrieved instead.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._pollen/core..rkt)._select))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValDef RktValLink" data-pltdoc="x">select</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">value-source</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">xexpr?</span></span></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">symbolish?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">value-source</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">txexpr?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pagenode?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pathish?</span></span></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._pollen/core..rkt)._select*))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%2A%29%29" class="RktValDef RktValLink" data-pltdoc="x">select*</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">value-source</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">xexpr?</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">symbolish?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">value-source</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">txexpr?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pagenode?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pathish?</span></span></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Find matches for <span class="RktVar">key</span> in <span class="RktVar">value-source</span>. The <span class="RktVar">value-source</span> can be 1)&#160;a hashtable of <span class="RktSym">metas</span>, 2)&#160;a tagged X-expression representing a <span class="RktSym">doc</span>, or 3)&#160;a pagenode or path that identifies a source file that provides <span class="RktSym">metas</span> and <span class="RktSym">doc</span>. In that case, first look for <span class="RktVar">key</span> in <span class="RktSym">metas</span><span class="RktMeta"></span> (using <span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span>) and then in <span class="RktSym">doc</span><span class="RktMeta"></span> (using <span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-doc%29%29" class="RktValLink" data-pltdoc="x">select-from-doc</a></span>).</div></p><p>With <span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span>, you get the first result; with <span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%2A%29%29" class="RktValLink" data-pltdoc="x">select*</a></span>, you get them all.</p><p>In both cases, you get <span class="RktVal">#f</span> if there are no matches.</p><p>Note that if <span class="RktVar">value-source</span> is a relative path or pagenode, it is treated as being relative to <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-project-root</span></span></span>. If that&rsquo;s not what you want, you&rsquo;ll need to convert it explicitly to a complete-path (e.g., with <span class="RktSym"><span class="badlink"><span class="RktValLink">path-&gt;complete-path</span></span></span> or <span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;complete-path</span></span></span>).</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">module</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">nut-butters</span><span class="hspace">&nbsp;</span><span class="RktSym">pollen/markup</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">question</span><span class="hspace">&nbsp;</span><span class="RktVal">"Flavor?"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">answer</span><span class="hspace">&nbsp;</span><span class="RktVal">"Cashew"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">answer</span><span class="hspace">&nbsp;</span><span class="RktVal">"Almond"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Import doc from </span><span class="RktCmt">'</span><span class="RktCmt">nut-butters submodule</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">nut-butters</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">question</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"Flavor?"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">answer</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"Cashew"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%2A%29%29" class="RktValLink" data-pltdoc="x">select*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">answer</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("Cashew" "Almond")</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%29%29" class="RktValLink" data-pltdoc="x">select</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">nonexistent-key</span><span class="hspace">&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select%2A%29%29" class="RktValLink" data-pltdoc="x">select*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">nonexistent-key</span><span class="hspace">&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._pollen/core..rkt)._select-from-doc))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-doc%29%29" class="RktValDef RktValLink" data-pltdoc="x">select-from-doc</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">doc-source</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">listof</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">xexpr?</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">symbolish?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">doc-source</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">txexpr?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pagenodeish?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pathish?</span></span></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Look up the value of <span class="RktVar">key</span> in <span class="RktVar">doc-source</span>. The <span class="RktVar">doc-source</span> argument can be either 1)&#160;a tagged X-expression representing a <span class="RktSym">doc</span> or 2)&#160;a pagenode or source path that identifies a source file that provides <span class="RktSym">doc</span>. If no value exists for <span class="RktVar">key</span>, you get <span class="RktVal">#f</span>.</div></p><p>Note that if <span class="RktVar">doc-source</span> is a relative path or pagenode, it is treated as being relative to <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-project-root</span></span></span>. If that&rsquo;s not what you want, you&rsquo;ll need to convert it explicitly to a complete-path (e.g., with <span class="RktSym"><span class="badlink"><span class="RktValLink">path-&gt;complete-path</span></span></span> or <span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;complete-path</span></span></span>).</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">module</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">gelato</span><span class="hspace">&nbsp;</span><span class="RktSym">pollen/markup</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">div</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">question</span><span class="hspace">&nbsp;</span><span class="RktVal">"Flavor?"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">answer</span><span class="hspace">&nbsp;</span><span class="RktVal">"Nocciola"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">answer</span><span class="hspace">&nbsp;</span><span class="RktVal">"Pistachio"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Import doc from </span><span class="RktCmt">'</span><span class="RktCmt">gelato submodule</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">gelato</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-doc%29%29" class="RktValLink" data-pltdoc="x">select-from-doc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">question</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("Flavor?")</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktVal">'</span><span class="RktVal">answer</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-doc%29%29" class="RktValLink" data-pltdoc="x">select-from-doc</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("Nocciola" "Pistachio")</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-doc%29%29" class="RktValLink" data-pltdoc="x">select-from-doc</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">nonexistent-key</span><span class="hspace">&nbsp;</span><span class="RktSym">doc</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._pollen/core..rkt)._select-from-metas))"></a><span title="Provided from: pollen/core | Package: pollen"><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValDef RktValLink" data-pltdoc="x">select-from-metas</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span><span class="RktVar">meta-source</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">xexpr?</span></span></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">symbolish?</span></span></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">meta-source</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">or/c</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pagenodeish?</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">pathish?</span></span></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Look up the value of <span class="RktVar">key</span> in <span class="RktVar">meta-source</span>. The <span class="RktVar">meta-source</span> argument can be either 1)&#160;a hashtable representing <span class="RktSym">metas</span> or 2)&#160;a pagenode or source path that identifies a source file that provides <span class="RktSym">metas</span>. If no value exists for <span class="RktVar">key</span>, you get <span class="RktVal">#f</span>.</div></p><p>Note that if <span class="RktVar">meta-source</span> is a relative path or pagenode, it is treated as being relative to <span class="RktSym"><span class="badlink"><span class="RktValLink">world:current-project-root</span></span></span>. If that&rsquo;s not what you want, you&rsquo;ll need to convert it explicitly to a complete-path (e.g., with <span class="RktSym"><span class="badlink"><span class="RktValLink">path-&gt;complete-path</span></span></span> or <span class="RktSym"><span class="badlink"><span class="RktValLink">-&gt;complete-path</span></span></span>).</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">metas</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">hash</span></span></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">template</span><span class="hspace">&nbsp;</span><span class="RktVal">"sub.xml.pp"</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">target</span><span class="hspace">&nbsp;</span><span class="RktVal">"print"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">template</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">metas</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"sub.xml.pp"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktVal">'</span><span class="RktVal">target</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym">metas</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"print"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="file:///Users/MB/git/pollen/pollen/scribblings/core.html#%28def._%28%28lib._pollen%2Fcore..rkt%29._select-from-metas%29%29" class="RktValLink" data-pltdoc="x">select-from-metas</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">nonexistent-key</span><span class="hspace">&nbsp;</span><span class="RktSym">metas</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>